<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The Editor</title>

  <style>
    * {
      padding: 10px;
      /* margin: 5px; */
    }
    body {
      font-family: sans-serif;
    }
    #output {
      border: 1px solid black;
    }
    .h {
      visibility: hidden;
    }
    #c {
      color: #777;
    }
  </style>
</head>

<body>

  <h2 style='margin-bottom:0'>Vanilla HTML Editor</h2>
  <span id='c'></span>
  <br><br>
  <br>
  <b>IN :</b>
  <br>
  <textarea placeholder="Write some HTML..." oninput='x()'
    id="input" cols="100" rows="15"></textarea>
  <br><br>
  <b>OUT :</b>
  <br>
  <br>
  <span class='h' id='output'></span>
<script>

let output = document.getElementById('output')
let input = document.getElementById('input')
let save = document.getElementById('c')

let count = false

setInterval(() => {
  if (count) count = false
  save.innerHTML = 'All changes saved.'
}, 1000)

function x() {
  if (input.value === '') {
    output.className = 'h'
  } else {
    output.className = ''
  }
  output.innerHTML = input.value
  save.innerHTML = 'Saving to localStorage...'
  if (count === 0) {
    localStorage.setItem('x', input.value)
    count = true
  }
}

if (localStorage.getItem('x') !== null) {
  input.value = localStorage.getItem('x')
  x()
}


</script>

</body>

</html>
